<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>ESP32 IMU</title>
<style>
*{box-sizing:border-box;margin:0;padding:0}
body{font:14px Arial,sans-serif;background:#667eea;color:#333;padding:10px}
.c{max-width:400px;margin:0 auto;background:#fff;padding:20px;border-radius:10px;box-shadow:0 4px 20px rgba(0,0,0,.3)}
h1{text-align:center;margin-bottom:20px;font-size:20px}
.s{display:flex;justify-content:space-between;background:#f0f0f0;padding:8px 12px;border-radius:5px;margin-bottom:15px;font-size:12px}
.g{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:20px}
.b{padding:12px;border:2px solid #28a745;border-radius:8px;text-align:center;background:#f9fff9}
.v{font:bold 18px monospace;color:#28a745;display:block;margin-bottom:3px}
.l{font-size:10px;color:#666;text-transform:uppercase}
.cube{width:120px;height:120px;margin:20px auto;perspective:200px}
.cb{width:60px;height:60px;margin:30px auto;transform-style:preserve-3d;transition:transform .1s}
.f{position:absolute;width:60px;height:60px;border:1px solid #28a745;background:rgba(40,167,69,.1);display:flex;align-items:center;justify-content:center;font-size:10px;color:#28a745}
.f1{transform:rotateY(0deg) translateZ(30px)}
.f2{transform:rotateY(180deg) translateZ(30px)}
.f3{transform:rotateY(90deg) translateZ(30px)}
.f4{transform:rotateY(-90deg) translateZ(30px)}
.f5{transform:rotateX(90deg) translateZ(30px)}
.f6{transform:rotateX(-90deg) translateZ(30px)}
.foot{text-align:center;font-size:10px;color:#666;margin-top:15px;border-top:1px solid #eee;padding-top:10px}
.err{background:#f8d7da;color:#721c24;padding:8px;border-radius:4px;margin:8px 0;font-size:11px;display:none}
</style>
</head>
<body>
<div class="c">
<h1>ğŸ¯ ESP32 IMU</h1>
<div class="s">
<div id="st">è¿æ¥ä¸­...</div>
<div id="tm">ç­‰å¾…æ•°æ®...</div>
</div>
<div class="err" id="err"></div>
<div class="g">
<div class="b"><span class="v" id="t">--</span><div class="l">æ¸©åº¦(Â°C)</div></div>
<div class="b"><span class="v" id="g">--</span><div class="l">é‡åŠ›(m/sÂ²)</div></div>
<div class="b"><span class="v" id="r">--</span><div class="l">Roll(Â°)</div></div>
<div class="b"><span class="v" id="p">--</span><div class="l">Pitch(Â°)</div></div>
</div>
<div class="cube">
<div class="cb" id="cb">
<div class="f f1">å‰</div>
<div class="f f2">å</div>
<div class="f f3">å³</div>
<div class="f f4">å·¦</div>
<div class="f f5">ä¸Š</div>
<div class="f f6">ä¸‹</div>
</div>
</div>
<div class="foot">å®æ—¶ç›‘æ§ | 5Hz | MPU6050</div>
</div>
<script>
let c=0,e=5,st=document.getElementById('st'),tm=document.getElementById('tm'),er=document.getElementById('err'),cb=document.getElementById('cb');
function se(m){er.textContent=m;er.style.display='block';setTimeout(()=>er.style.display='none',2000)}
function us(ok){c=ok?0:c+1;st.textContent=ok?'âœ…è¿æ¥':'âŒæ–­å¼€';st.style.color=ok?'#28a745':'#dc3545';if(ok)tm.textContent=new Date().toLocaleTimeString('zh-CN')}
function uc(r,p,y){cb.style.transform=`rotateX(${(r||0)*0.017}rad) rotateY(${(p||0)*0.017}rad) rotateZ(${(y||0)*0.017}rad)`}
function ud(){fetch('/data').then(r=>{if(!r.ok)throw new Error(`HTTP ${r.status}`);return r.json()}).then(d=>{us(1);document.getElementById('t').textContent=d.temp||'--';document.getElementById('g').textContent=d.gravity||'--';document.getElementById('r').textContent=d.roll||'--';document.getElementById('p').textContent=d.pitch||'--';uc(parseFloat(d.roll)||0,parseFloat(d.pitch)||0,parseFloat(d.yaw)||0)}).catch(x=>{console.error(x);us(0);c<=e&&se(`è¿æ¥é”™è¯¯(${c}/${e}): ${x.message}`)})}
ud();setInterval(ud,200);
</script>
</body>
</html>