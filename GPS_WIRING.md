# ESP32 Draggy Performance Logger - 接线图

## 硬件连接图

### ESP32 开发板连接

#### I2C设备连接 (共享总线)
- **SDA**: GPIO21 → MPU6050 SDA, OLED SDA
- **SCL**: GPIO22 → MPU6050 SCL, OLED SCL
- **VCC**: 3.3V → 所有设备VCC  
- **GND**: GND → 所有设备GND

#### GT-U7 GPS模块连接
- **GPS VCC** → ESP32 3.3V (或5V，根据模块规格)
- **GPS GND** → ESP32 GND
- **GPS TX** → ESP32 GPIO16 (RX2)
- **GPS RX** → ESP32 GPIO17 (TX2)

### 完整连接表

| 设备          | 引脚    | ESP32引脚 | 说明                    |
|---------------|---------|-----------|-------------------------|
| MPU6050       | VCC     | 3.3V      | 电源                    |
| MPU6050       | GND     | GND       | 地线                    |
| MPU6050       | SDA     | GPIO21    | I2C数据线               |
| MPU6050       | SCL     | GPIO22    | I2C时钟线               |
| OLED SSD1306  | VCC     | 3.3V      | 电源                    |
| OLED SSD1306  | GND     | GND       | 地线                    |
| OLED SSD1306  | SDA     | GPIO21    | I2C数据线 (与MPU共享)   |
| OLED SSD1306  | SCL     | GPIO22    | I2C时钟线 (与MPU共享)   |
| GT-U7 GPS     | VCC     | 3.3V/5V   | 电源 (检查模块电压要求) |
| GT-U7 GPS     | GND     | GND       | 地线                    |
| GT-U7 GPS     | TX      | GPIO16    | GPS串口发送→ESP32接收   |
| GT-U7 GPS     | RX      | GPIO17    | GPS串口接收←ESP32发送   |

### 注意事项

1. **电源要求**
   - 确认GT-U7模块的工作电压 (3.3V或5V)
   - 如果是5V模块，可能需要电平转换

2. **GPS天线**
   - GT-U7模块通常自带陶瓷天线
   - 确保天线面朝上，远离金属遮挡
   - 首次定位可能需要1-5分钟

3. **I2C地址**
   - MPU6050: 0x68 (AD0接地) 或 0x69 (AD0接VCC)
   - OLED: 0x3C 或 0x3D (根据模块设置)

4. **车辆安装**
   - MPU6050应水平安装，X轴指向车头方向
   - 确保设备固定牢固，减少振动影响
   - GPS天线需要良好的卫星视野

### 推荐的车辆安装位置

- **仪表台中央**: GPS信号接收良好，易于观察OLED显示
- **中控台**: 靠近12V电源，便于长期供电
- **避免**: 金属屋顶下方，强电磁干扰区域

### 供电方案

1. **USB供电**: 开发和测试阶段
2. **车载12V转5V/3.3V**: 实际使用
3. **移动电源**: 便携式测试

### 性能优化建议

1. **GPS定位精度**
   - 选择开阔场地进行首次定位
   - 等待至少4颗卫星信号稳定

2. **IMU校准**
   - 设备安装后进行零点校准
   - 定期检查传感器偏移

3. **数据记录**
   - 建议使用SPIFFS保存测试数据
   - 可通过Web界面下载历史记录

### 故障排除

1. **GPS无法定位**
   - 检查天线位置和朝向
   - 确认串口连接和波特率 (9600)
   - 观察卫星数量显示

2. **I2C设备无响应**
   - 检查SDA/SCL接线
   - 确认设备地址设置
   - 检查电源电压

3. **性能数据异常**
   - 重新校准IMU传感器
   - 检查车辆安装角度
   - 确认GPS速度数据有效

## 软件配置

### 主要功能模式

- **模式0**: IMU数据显示 (姿态角、G力)
- **模式1**: WiFi连接二维码  
- **模式2**: GPS状态 (速度、卫星数量)
- **模式3**: 性能数据 (加速时间、最大G力)

### Web界面访问

1. 连接WiFi热点 "ESP32-IMU" (密码: 12345678)
2. 访问 http://192.168.4.1
3. 查看实时数据和历史记录